# community牛客社区项目



#### 1 技术点：

前端:thymeleaf 动态引擎框架

后端：SpringBoot,Mybatis ，MySQL



#### 2 功能模块

**首页模块**： 分页显示所有的帖子信息。 重点主要在于tymeleaf模板引擎的使用，如何将模型MODEL中绑定的参数交给视图进行动态渲染

**用户账号注册与激活**：

1. 邮件发送工具类，SpringBoot整合SpringMail，使用QQ邮箱作为发件方，利用tymeleaf邮件模板，发送HTML邮件；
2. 用户注册账号，发送一封激活邮件
3. 用户点击激活邮件，激活注册的账号

**账号登录，退出模块**：

``【验证用户信息及验证码进行登录】``

1. 整合Kapatcha，实现生成动态验证码

2. 验证账号，密码，验证码；验证成功后生成登录凭证，验证失败后跳转回登录页面

3. 账号退出时，将登录凭证修改为失效状态，跳转到用户首页、

**显示首页信息**

```txt
登录之后显示正确显示用户信息
使用LoginInterceptor进行拦截，判断用户是否正常登录
显示在页眉的信息会根据登录与否显示的不同。登录之前需要显示注册、登录界面，登录之后显示用户头像，消息等信息
由于http请求的无状态性，多个连续的请求需要保持一致性，所以以为着每个请求都需要判断用户是否登录与否。
此处用到了拦截器对所有的请求进行的统一的处理。【拦截器的主要使用包括两个步骤，实现HandlerInterceptor类，注册Interceptor】
```

在本该功能模块中实现的具体步骤为：

1. 在请求开始时查询登录用户; 【在进入之前执行preHandle】 
2. 本次请求中持有本次用户信息; 【在请求结束前使用的是同一个线程，可将持有的用户信息存入到ThreadLocal中】
3. 在模板视图中显示用户信息; 【postHandle】
4. 在模板视图渲染后显示用户信息; 【afterCompletion】

**设置用户信息**

1 切换到用户设置页面  

2 上传用户头像并更新数据库中用户头像信息【POST请求】

3 修改用戶密码



**检查用户登录状态**

```text
某些功能页面的访问需要登录之后进行访问，需要判断请求是否是成功登录的。【某些指定的功能界面通过自定义注解定义，标注了该注解的方法必须是在登录下进行】
通过拦截器的功能实现。判断是否标注了注解通过反射的方式来判断。
```



